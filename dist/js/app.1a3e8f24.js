(function(e){function t(t){for(var n,i,s=t[0],u=t[1],c=t[2],v=0,f=[];v<s.length;v++)i=s[v],a[i]&&f.push(a[i][0]),a[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);l&&l(t);while(f.length)f.shift()();return r.push.apply(r,c||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],n=!0,s=1;s<o.length;s++){var u=o[s];0!==a[u]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=o[0]))}return e}var n={},a={app:0},r=[];function i(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=n,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=u;r.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"034f":function(e,t,o){"use strict";var n=o("64a9"),a=o.n(n);a.a},"15ee":function(e,t,o){"use strict";var n=o("b5df"),a=o.n(n);a.a},"41f9":function(e,t,o){"use strict";var n=o("70ac"),a=o.n(n);a.a},"56d7":function(e,t,o){"use strict";o.r(t);o("cadf"),o("551c"),o("f751"),o("097d");var n=o("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("img",{attrs:{alt:"Vue logo",src:o("cf05")}}),n("Piano")],1)},r=[],i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container"},[o("div",{staticClass:"toggles"},[o("button",{class:{on:e.showfq},on:{click:e.toggleShowFq}},[e._v(e._s(e.showfq?"Hide":"Show")+" Frequencies")]),o("button",{class:{on:e.showov},on:{click:e.toggleShowOv}},[e._v(e._s(e.showov?"Hide":"Show")+" Octave Select")]),o("button",{class:{on:e.showwf},on:{click:e.toggleShowWf}},[e._v(e._s(e.showwf?"Hide":"Show")+" Waveform Select")])]),o("div",{staticClass:"keyboard"},e._l(e.keys,function(t){return o("Key",e._b({key:t.id,attrs:{octave:e.octave,volume:e.volume,wavefm:e.wavefm,showfq:e.showfq}},"Key",t,!1))}),1),o("div",{staticClass:"controls"},[e.showov?o("div",[o("label",[e._v("Octave:")]),o("div",{staticClass:"spinner"},[o("button",{on:{click:e.octaveDn}},[e._v("-")]),o("span",[e._v(e._s(e.octave))]),o("button",{on:{click:e.octaveUp}},[e._v("+")])])]):e._e(),o("div",[o("label",[e._v("Volume:")]),o("input",{directives:[{name:"model",rawName:"v-model.number",value:e.volume,expression:"volume",modifiers:{number:!0}}],staticClass:"slider",attrs:{type:"range",min:"0",max:".2",step:"0.001"},domProps:{value:e.volume},on:{__r:function(t){e.volume=e._n(t.target.value)},blur:function(t){return e.$forceUpdate()}}}),o("span",{staticClass:"volPerc"},[e._v(e._s(Math.floor(500*e.volume)+"%"))])]),e.showwf?o("div",[o("label",[e._v("Waveform:")]),o("select",{directives:[{name:"model",rawName:"v-model",value:e.wavefm,expression:"wavefm"}],on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.wavefm=t.target.multiple?o:o[0]}}},[o("option",{attrs:{value:"sine"}},[e._v("Sine")]),o("option",{attrs:{value:"square"}},[e._v("Square")]),o("option",{attrs:{value:"sawtooth"}},[e._v("Sawtooth")]),o("option",{attrs:{value:"triangle"}},[e._v("Triangle")])])]):e._e()])])},s=[],u=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:[e.isBlackKey?"bkey":"wkey"],on:{mousedown:e.onmousedown,mouseup:e.onmouseup}},[e.showfq?o("span",[e._v(e._s(Math.floor(100*e.frequency)/100))]):e._e()])},c=[],l=(o("6762"),o("2fdb"),o("c5f6"),["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"]),v=new(window.AudioContext||window.webkitAudioContext),f=v.createOscillator(),d=v.createGain();d.gain.value=0,f.type="square",f.connect(d),d.connect(v.destination),f.start();var h={name:"Key",props:{octave:Number,volume:Number,wavefm:String,showfq:Boolean,keyNum:Number,dudKey:Boolean,active:Boolean,shared:Object},data:function(){return this.shared},computed:{id:function(){return l[this.keyNum>=0?this.keyNum%12:12+this.keyNum]+this.octave},isBlackKey:function(){return this.id.includes("#")},frequency:function(){return Math.pow(2,this.keyNum/12)*Math.pow(2,this.octave-4)*440}},methods:{onmousedown:function(){this.active&&!this.dudKey&&(f.type=this.wavefm,f.frequency.setValueAtTime(this.frequency,v.currentTime),d.gain.setValueAtTime(+this.volume,v.currentTime),this.shared.played=!0,console.log(this.volume))},onmouseup:function(){d.gain.setValueAtTime(0,v.currentTime)}}},p=h,m=(o("41f9"),o("2877")),w=Object(m["a"])(p,u,c,!1,null,"4c39cda8",null),y=w.exports,b={name:"Piano",data:function(){return{octave:4,volume:.2,wavefm:"sine",showfq:!1,showwf:!1,showov:!1,numKeys:24,optionSelected:!1}},computed:{keys:function(){for(var e=[],t=0;t<this.numKeys;t++){var o=t-4,n={keyNum:o,dudKey:Math.random()<.1,active:!0,shared:{played:!1,needsTuning:!1}};e.push(n)}return e}},methods:{toggleShowFq:function(){this.showfq=!this.showfq},toggleShowWf:function(){this.showwf=!this.showwf},toggleShowOv:function(){this.showov=!this.showov},octaveUp:function(){this.octave<8&&this.octave++},octaveDn:function(){this.octave>0&&this.octave--}},components:{Key:y}},g=b,_=(o("15ee"),Object(m["a"])(g,i,s,!1,null,"42e2c4b1",null)),k=_.exports,S={name:"app",components:{Piano:k}},q=S,O=(o("034f"),Object(m["a"])(q,a,r,!1,null,null,null)),x=O.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(x)}}).$mount("#app")},"64a9":function(e,t,o){},"70ac":function(e,t,o){},b5df:function(e,t,o){},cf05:function(e,t,o){e.exports=o.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.1a3e8f24.js.map